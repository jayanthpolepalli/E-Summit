# Tirupati Urban Change Explorer

Pixel-level Land Use / Land Cover (LULC) change dashboard for Tirupati district, built for the AI for Sustainable Urban Development & Smart City Governance hackathon.[file:1]

## 1. What this project does

- Shows pixel-level LULC maps for two time periods (T1, T2).
- Detects and visualizes class-to-class land-use transitions (e.g., Forest → Built-up).[file:1]
- Displays a transition matrix, area statistics, and key insights.
- Provides a confidence layer showing how sure the model is at each pixel.[file:1]
- Offers an interactive web dashboard for planners and policymakers.[file:1]

---

## 2. Folder structure and responsibilities

### 2.1 backend/

**Goal:** Serve processed geospatial data and analytics to the frontend as simple JSON/CSV endpoints.

- `app.py`
  - Minimal Flask/FastAPI app.
  - Endpoints:
    - `GET /api/class-stats` → returns class areas for T1 and T2 from `class_stats_t1_t2.csv`.
    - `GET /api/transition-matrix` → returns matrix from `transition_matrix.csv`.
    - `GET /api/insights` → returns bullet-point insights from `insights.json`.
  - Optional: endpoint to serve static map tiles or PNGs if needed.

- `requirements.txt`
  - List of Python dependencies, e.g.:
    - `flask` or `fastapi`
    - `pandas`
    - `numpy`
    - `rasterio` (optional, more for scripts than runtime)

- `data/aoi/tirupati_boundary.shp`
  - Shapefile defining the Area of Interest (AOI) = Tirupati district.[file:1]
  - Used by preprocessing scripts to clip satellite imagery.

- `data/rasters/`
  - `lulc_t1.tif`: Pixel-wise LULC classification for time T1 (5 classes).[file:1]
  - `lulc_t2.tif`: Pixel-wise LULC classification for time T2.[file:1]
  - `change_map.tif`: Encoded transitions (e.g., 11=Forest→Forest, 15=Forest→Built-up).
  - `confidence_map.tif`: Per-pixel confidence score (0–1 or 0–100).

- `data/outputs/`
  - `transition_matrix.csv`:
    - 5×5 matrix: rows = T1 class, columns = T2 class, values = area or %.[file:1]
  - `class_stats_t1_t2.csv`:
    - Table of class areas for T1 and T2, and net change per class.
  - `insights.json`:
    - Short text insights generated by the script (e.g., “Built-up increased by X% mainly by converting Agriculture”).[file:1]

---

### 2.2 frontend/

**Goal:** Implement the UI that makes you stand out in the hackathon.

- `index.html`
  - Main layout structure:
    - Top header with project title and short description.
    - Left map panel with Leaflet map and layer toggles (T1, T2, Change, Confidence).[file:1]
    - Right analytics panel with:
      - Summary KPIs (built-up T1/T2, net increase).
      - Transition matrix table.
      - Chart area for class areas.
      - Export buttons + insights list.[file:1]
  - Includes:
    - Link to `styles.css`.
    - Script tags for Leaflet, Chart.js, and `main.js`.

- `styles.css`
  - Implements a clean, two-column layout:
    - `#map-panel` wide on the left, `#analytics-panel` fixed-width on the right.
    - Cards for sections inside the analytics panel with subtle shadows.
  - Defines consistent colors for:
    - Forest, Water, Agriculture, Barren, Built-up (map legend, charts, matrix highlights).
  - Makes the page look like a professional analytics tool (good margins, fonts, responsive).

- `main.js`
  - Frontend logic:
    - Initializes Leaflet map centered on Tirupati.
    - Adds:
      - Base map layer.
      - Overlay layers for `lulc_t1`, `lulc_t2`, `change`, `confidence` (as image overlays or tiles).
    - Connects layer toggle checkboxes to show/hide these layers.
    - Fetches JSON/CSV data from backend endpoints:
      - Fills KPIs, transition matrix table, and charts.
    - Populates insights list dynamically.
    - Implements “Download CSV” by linking to backend CSV endpoint or static file.

---

### 2.3 scripts/

**Goal:** One-time or iterative data processing to create inputs for the dashboard.

- `preprocess.py`
  - Tasks:
    - Load raw satellite images for T1 and T2 (Landsat/Sentinel or sample GeoTIFFs).
    - Clip images to AOI (`tirupati_boundary.shp`).[file:1]
    - Optionally compute simple indices (NDVI, built-up index) and save processed rasters.

- `generate_lulc.py`
  - Tasks:
    - Implement a simple LULC classifier (e.g., basic thresholds or lightweight ML).
    - Input: preprocessed T1 and T2 imagery.
    - Output:
      - `lulc_t1.tif`, `lulc_t2.tif` with 5 classes (Forest, Water, Agriculture, Barren, Built-up).[file:1]
    - Also output a probability/confidence map per pixel, used to derive `confidence_map.tif`.[file:1]

- `compute_change_and_stats.py`
  - Tasks:
    - Combine `lulc_t1.tif` and `lulc_t2.tif`:
      - For each pixel, create a transition code and save `change_map.tif`.
    - Compute:
      - Transition matrix → save as `transition_matrix.csv`.
      - Class areas T1/T2 → save as `class_stats_t1_t2.csv`.
    - Generate simple textual insights (e.g., top 3 largest transitions) and save to `insights.json`.

---

## 3. UI and application features to implement

### 3.1 Map UI (Leaflet, in `index.html` + `main.js`)

- Large interactive map showing Tirupati.
- Layer toggles:
  - T1 LULC
  - T2 LULC
  - Change map
  - Confidence map
- Legend showing the 5 LULC classes with matching colors.[file:1]

### 3.2 Analytics panel (in `index.html` + `main.js`)

- **Key metrics card:**
  - Built-up area T1
  - Built-up area T2
  - Net built-up increase

- **Transition matrix card:**
  - 5×5 table of class transitions filled via data from backend.[file:1]

- **Charts card:**
  - Bar chart showing class areas at T1 and T2 side-by-side.

- **Exports & insights card:**
  - Button to download CSV of transition matrix and class stats.
  - Button to download or “print screen” the current map view (optional).
  - List of 3–5 auto-generated insights (from `insights.json`).[file:1]

---

## 4. How to run (for hackathon judges)

You can add a short “How to run” section:

```markdown
## 4. How to run

1. Install backend dependencies:

   ```bash
   cd backend
   pip install -r requirements.txt
   python app.py
